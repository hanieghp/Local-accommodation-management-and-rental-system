# ğŸ“„ scripts/resetAdminPassword.js - Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±ÛŒØ³Øª Ø±Ù…Ø² Ø§Ø¯Ù…ÛŒÙ†

## ğŸ“‹ ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ù„ÛŒ
Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø±Ø§ÛŒ Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø¯Ù…ÛŒÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø§Ú¯Ø± Ø§Ø¯Ù…ÛŒÙ† ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ Ø¢Ù† Ø±Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

---

## ğŸš€ Ù†Ø­ÙˆÙ‡ Ø§Ø¬Ø±Ø§

```powershell
cd backend/scripts
node resetAdminPassword.js
```

---

## ğŸ¯ Ù…ÙˆØ§Ø±Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡

1. **ÙØ±Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù† Ø±Ù…Ø² Ø§Ø¯Ù…ÛŒÙ†**
2. **Ù‚ÙÙ„ Ø´Ø¯Ù† Ø§Ú©Ø§Ù†Øª Ø§Ø¯Ù…ÛŒÙ†**
3. **Ù…Ø´Ú©Ù„ Ø¯Ø± Ù„Ø§Ú¯ÛŒÙ† Ø§Ø¯Ù…ÛŒÙ†**
4. **Ø§ÛŒØ¬Ø§Ø¯ Ø§Ø¯Ù…ÛŒÙ† Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯**

---

## ğŸ“ ØªØ­Ù„ÛŒÙ„ Ø®Ø· Ø¨Ù‡ Ø®Ø·

### Ø®Ø·ÙˆØ· 1-24: Setup (Ù…Ø´Ø§Ø¨Ù‡ createAdmin.js)

```javascript
require('dotenv').config({ path: '../.env' });
const mongoose = require('mongoose');
const bcrypt = require('bcryptjs');

mongoose.connect(process.env.MONGODB_URI || 'mongodb://localhost:27017/staylocal')
    .then(() => console.log('MongoDB Connected'))
    .catch(err => {
        console.error('MongoDB connection error:', err);
        process.exit(1);
    });

const userSchema = new mongoose.Schema({
    name: String,
    email: { type: String, unique: true },
    password: String,
    phone: String,
    role: { type: String, enum: ['traveler', 'host', 'admin'], default: 'traveler' },
    avatar: String,
    isActive: { type: Boolean, default: true },
    createdAt: { type: Date, default: Date.now }
});

const User = mongoose.model('User', userSchema);
```

---

### Ø®Ø·ÙˆØ· 26-70: ØªØ§Ø¨Ø¹ Ø±ÛŒØ³Øª

```javascript
async function resetAdminPassword() {
    try {
        // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø§Ø¯Ù…ÛŒÙ†
        const admin = await User.findOne({ email: 'admin@staylocal.com' });
        
        if (!admin) {
            // Ø§Ø¯Ù…ÛŒÙ† ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯ - Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
            console.log('Admin not found! Creating new admin...');
            
            const salt = await bcrypt.genSalt(10);
            const hashedPassword = await bcrypt.hash('admin123', salt);
            
            await User.create({
                name: 'Admin User',
                email: 'admin@staylocal.com',
                password: hashedPassword,
                phone: '+1234567890',
                role: 'admin',
                isActive: true
            });
            
            console.log('âœ… Admin created!');
        } else {
            // Ø§Ø¯Ù…ÛŒÙ† ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ - Ø±ÛŒØ³Øª Ø±Ù…Ø²
            const salt = await bcrypt.genSalt(10);
            const hashedPassword = await bcrypt.hash('admin123', salt);
            
            admin.password = hashedPassword;
            admin.role = 'admin';       // Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ù†Ù‚Ø´ Ø§Ø¯Ù…ÛŒÙ†
            admin.isActive = true;      // ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ú©Ø§Ù†Øª
            await admin.save();
            
            console.log('âœ… Admin password reset successfully!');
        }
        
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('Email: admin@staylocal.com');
        console.log('Password: admin123');
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        
        process.exit(0);
    } catch (error) {
        console.error('Error:', error);
        process.exit(1);
    }
}

resetAdminPassword();
```

---

## ğŸ”„ Ø¬Ø±ÛŒØ§Ù† Ø§Ø¬Ø±Ø§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ø§Ø¬Ø±Ø§ÛŒ node resetAdminPassword.js   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ø§ØªØµØ§Ù„ Ø¨Ù‡ MongoDB                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ø¬Ø³ØªØ¬Ùˆ: admin@staylocal.com         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                 â”‚
       â–¼ ÛŒØ§ÙØª Ù†Ø´Ø¯       â–¼ ÛŒØ§ÙØª Ø´Ø¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ø§ÛŒØ¬Ø§Ø¯ Ø§Ø¯Ù…ÛŒÙ†    â”‚  â”‚ Ø±ÛŒØ³Øª Ø±Ù…Ø²       â”‚
â”‚ Ø¬Ø¯ÛŒØ¯           â”‚  â”‚ admin.password â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ = hash(admin123)â”‚
       â”‚            â”‚ admin.role=adminâ”‚
       â”‚            â”‚ admin.isActive  â”‚
       â”‚            â”‚ = true          â”‚
       â”‚            â”‚ admin.save()    â”‚
       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ±ÙˆØ¯                 â”‚
â”‚ Email: admin@staylocal.com          â”‚
â”‚ Password: admin123                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
           exit(0)
```

---

## ğŸ“¤ Ø®Ø±ÙˆØ¬ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª

### Ø§Ú¯Ø± Ø§Ø¯Ù…ÛŒÙ† ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ (Ø±ÛŒØ³Øª):
```
MongoDB Connected
âœ… Admin password reset successfully!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Email: admin@staylocal.com
Password: admin123
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### Ø§Ú¯Ø± Ø§Ø¯Ù…ÛŒÙ† ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ (Ø§ÛŒØ¬Ø§Ø¯):
```
MongoDB Connected
Admin not found! Creating new admin...
âœ… Admin created!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Email: admin@staylocal.com
Password: admin123
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸ”§ Ø§Ù‚Ø¯Ø§Ù…Ø§Øª Ø§Ø¶Ø§ÙÛŒ Ø±ÛŒØ³Øª

```javascript
admin.password = hashedPassword;
admin.role = 'admin';      // â† Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ù†Ù‚Ø´ Ø§Ø¯Ù…ÛŒÙ†
admin.isActive = true;     // â† ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ú¯Ø± ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´Ø¯Ù‡
await admin.save();
```

**Ú†Ø±Ø§ Ø§ÛŒÙ† Ø§Ù‚Ø¯Ø§Ù…Ø§ØªØŸ**

| ÙÛŒÙ„Ø¯ | Ø¯Ù„ÛŒÙ„ |
|------|------|
| password | Ø±ÛŒØ³Øª Ø±Ù…Ø² (Ù‡Ø¯Ù Ø§ØµÙ„ÛŒ) |
| role | Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø§Ø´ØªØ¨Ø§Ù‡Ø§Ù‹ ØªØºÛŒÛŒØ± Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ |
| isActive | Ù…Ù…Ú©Ù† Ø§Ø³Øª ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ |

---

## âš ï¸ ØªÙØ§ÙˆØª Ø¨Ø§ createAdmin.js

| ÙˆÛŒÚ˜Ú¯ÛŒ | createAdmin.js | resetAdminPassword.js |
|-------|----------------|----------------------|
| Ø§Ú¯Ø± Ø§Ø¯Ù…ÛŒÙ† ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ | ÙÙ‚Ø· Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ | Ø±Ù…Ø² Ø±Ø§ Ø±ÛŒØ³Øª Ù…ÛŒâ€ŒÚ©Ù†Ø¯ |
| Ø§Ú¯Ø± Ø§Ø¯Ù…ÛŒÙ† ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯ | Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ | Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ |
| ØªØºÛŒÛŒØ± role | - | Ø¨Ù„Ù‡ |
| ØªØºÛŒÛŒØ± isActive | - | Ø¨Ù„Ù‡ |

---

## ğŸ›¡ï¸ Ø§Ù…Ù†ÛŒØª

1. **ÙÙ‚Ø· Ø¯Ø± CLI:** Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ÙÙ‚Ø· Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø®Ø· ÙØ±Ù…Ø§Ù† Ù‚Ø§Ø¨Ù„ Ø§Ø¬Ø±Ø§ Ø§Ø³Øª
2. **Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ±:** Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ SSH ÛŒØ§ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ù‡ Ø³Ø±ÙˆØ±
3. **Production:** Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ØŒ Ø­ØªÙ…Ø§Ù‹ Ø±Ù…Ø² Ø±Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù¾Ù†Ù„ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯
