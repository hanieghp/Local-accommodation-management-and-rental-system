<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New Property | StayLocal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../assets/css/style.css" />
    <style>
        .add-property-container {
            background: #f8f9fa;
            min-height: 100vh;
            padding-top: 100px;
            padding-bottom: 50px;
        }
        
        .wizard-progress {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
        }
        
        .wizard-step {
            display: flex;
            align-items: center;
        }
        
        .step-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: #6b7280;
            transition: all 0.3s;
        }
        
        .step-circle.active {
            background: linear-gradient(135deg, var(--brand), var(--brand2));
            color: white;
        }
        
        .step-circle.completed {
            background: #10b981;
            color: white;
        }
        
        .step-line {
            width: 80px;
            height: 4px;
            background: #e5e7eb;
            margin: 0 10px;
        }
        
        .step-line.active {
            background: var(--brand);
        }
        
        .step-label {
            position: absolute;
            bottom: -25px;
            white-space: nowrap;
            font-size: 14px;
            color: #6b7280;
        }
        
        .form-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .form-card h3 {
            color: #1f2937;
            margin-bottom: 30px;
            font-weight: 700;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #374151;
        }
        
        .form-group input, 
        .form-group select, 
        .form-group textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.3s;
        }
        
        .form-group input:focus, 
        .form-group select:focus, 
        .form-group textarea:focus {
            outline: none;
            border-color: var(--brand);
        }
        
        .property-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .property-type-option {
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .property-type-option:hover {
            border-color: var(--brand);
        }
        
        .property-type-option.selected {
            border-color: var(--brand);
            background: rgba(24,169,153,0.1);
        }
        
        .property-type-option .icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }
        
        .amenity-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .amenity-checkbox:hover {
            border-color: var(--brand);
        }
        
        .amenity-checkbox.selected {
            border-color: var(--brand);
            background: rgba(24,169,153,0.1);
        }
        
        .amenity-checkbox input {
            display: none;
        }
        
        .image-upload-area {
            border: 3px dashed #e5e7eb;
            border-radius: 15px;
            padding: 50px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .image-upload-area:hover {
            border-color: var(--brand);
            background: rgba(24,169,153,0.05);
        }
        
        .image-upload-area .icon {
            font-size: 48px;
            color: #9ca3af;
            margin-bottom: 15px;
        }
        
        .image-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .image-preview {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .image-preview img {
            width: 100%;
            height: 100px;
            object-fit: cover;
        }
        
        .image-preview .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: rgba(220,38,38,0.9);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 12px;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn-prev, .btn-next, .btn-submit {
            flex: 1;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-prev {
            background: #f3f4f6;
            color: #4b5563;
            border: none;
        }
        
        .btn-next, .btn-submit {
            background: linear-gradient(135deg, var(--brand), var(--brand2));
            color: white;
            border: none;
        }
        
        .btn-next:hover, .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(24,169,153,0.3);
        }
        
        .step-panel {
            display: none;
        }
        
        .step-panel.active {
            display: block;
        }
        
        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .summary-section {
            background: #f9fafb;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }
        
        .summary-section h5 {
            color: #1f2937;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .summary-item:last-child {
            border-bottom: none;
        }
        
        @media (max-width: 768px) {
            .wizard-step .step-line {
                width: 40px;
            }
            
            .form-card {
                padding: 25px;
            }
            
            .pricing-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="bg-white border-bottom fixed-top">
        <nav class="navbar navbar-expand-lg container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <img src="../assets/images/img.png" height="50" width="50">
                <span class="fw-bold">StayLocal</span>
            </a>
            <div class="d-flex gap-2">
                <a class="btn btn-outline-secondary" href="profile.html">Profile</a>
            </div>
        </nav>
    </header>

    <div class="add-property-container">
        <div class="container">
            <div class="wizard-progress">
                <div class="wizard-step">
                    <div class="step-circle active" id="step1Circle">1</div>
                </div>
                <div class="step-line" id="line1"></div>
                <div class="wizard-step">
                    <div class="step-circle" id="step2Circle">2</div>
                </div>
                <div class="step-line" id="line2"></div>
                <div class="wizard-step">
                    <div class="step-circle" id="step3Circle">3</div>
                </div>
                <div class="step-line" id="line3"></div>
                <div class="wizard-step">
                    <div class="step-circle" id="step4Circle">4</div>
                </div>
            </div>
            
            <div class="form-card">
                <div id="step1" class="step-panel active">
                    <h3>Basic Information</h3>
                    
                    <div class="form-group">
                        <label>Property Title</label>
                        <input type="text" id="propertyTitle" placeholder="e.g., Modern Apartment in Downtown">
                    </div>
                    
                    <div class="form-group">
                        <label>Property Type</label>
                        <div class="property-type-grid">
                            <div class="property-type-option" onclick="selectType(this, 'apartment')">
                                <div class="icon">A</div>
                                <div>Apartment</div>
                            </div>
                            <div class="property-type-option" onclick="selectType(this, 'villa')">
                                <div class="icon">V</div>
                                <div>Villa</div>
                            </div>
                            <div class="property-type-option" onclick="selectType(this, 'house')">
                                <div class="icon">H</div>
                                <div>House</div>
                            </div>
                            <div class="property-type-option" onclick="selectType(this, 'cottage')">
                                <div class="icon">C</div>
                                <div>Cottage</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="propertyDescription" rows="4" placeholder="Describe your property..."></textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Bedrooms</label>
                                <select id="bedrooms">
                                    <option value="1">1 Bedroom</option>
                                    <option value="2">2 Bedrooms</option>
                                    <option value="3">3 Bedrooms</option>
                                    <option value="4">4 Bedrooms</option>
                                    <option value="5">5+ Bedrooms</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Bathrooms</label>
                                <select id="bathrooms">
                                    <option value="1">1 Bathroom</option>
                                    <option value="2">2 Bathrooms</option>
                                    <option value="3">3 Bathrooms</option>
                                    <option value="4">4+ Bathrooms</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Max Guests</label>
                                <select id="maxGuests">
                                    <option value="2">2 Guests</option>
                                    <option value="4">4 Guests</option>
                                    <option value="6">6 Guests</option>
                                    <option value="8">8 Guests</option>
                                    <option value="10">10+ Guests</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-next" onclick="nextStep(2)">Next Step ‚Üí</button>
                    </div>
                </div>
                
                <div id="step2" class="step-panel">
                    <h3>Location & Address</h3>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Country</label>
                                <select id="country">
                                    <option value="">Select Country</option>
                                    <option value="usa">United States</option>
                                    <option value="canada">Canada</option>
                                    <option value="uk">United Kingdom</option>
                                    <option value="australia">Australia</option>
                                    <option value="germany">Germany</option>
                                    <option value="france">France</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>City</label>
                                <input type="text" id="city" placeholder="e.g., New York">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Street Address</label>
                        <input type="text" id="address" placeholder="e.g., 123 Main Street">
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>ZIP/Postal Code</label>
                                <input type="text" id="zipCode" placeholder="e.g., 10001">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Neighborhood</label>
                                <input type="text" id="neighborhood" placeholder="e.g., Downtown">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Nearby Landmarks (Optional)</label>
                        <textarea id="landmarks" rows="2" placeholder="e.g., 5 min walk from Central Park, Near subway station"></textarea>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-prev" onclick="prevStep(1)">‚Üê Previous</button>
                        <button class="btn-next" onclick="nextStep(3)">Next Step ‚Üí</button>
                    </div>
                </div>
                
                <div id="step3" class="step-panel">
                    <h3>Amenities & Photos</h3>
                    
                    <div class="form-group">
                        <label>Amenities</label>
                        <div class="amenities-grid">
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="wifi">
                                High-Speed WiFi
                            </label>
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="parking">
                                Parking
                            </label>
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="ac">
                                Air Conditioning
                            </label>
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="heating">
                                Heating
                            </label>
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="tv">
                                Smart TV
                            </label>
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="kitchen">
                                Full Kitchen
                            </label>
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="washer">
                                Washer/Dryer
                            </label>
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="pool">
                                Pool
                            </label>
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="gym">
                                Gym
                            </label>
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="pets">
                                Pet Friendly
                            </label>
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="balcony">
                                Balcony
                            </label>
                            <label class="amenity-checkbox" onclick="toggleAmenity(this)">
                                <input type="checkbox" value="workspace">
                                Workspace
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Property Photos</label>
                        <div class="image-upload-area" onclick="document.getElementById('imageInput').click()">
                            <div class="icon">+</div>
                            <p>Click to upload photos</p>
                            <small class="text-muted">Upload up to 10 photos (JPG, PNG)</small>
                        </div>
                        <input type="file" id="imageInput" multiple accept="image/*" style="display: none;" onchange="handleImageUpload(this)">
                        <div class="image-preview-grid" id="imagePreviewGrid"></div>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-prev" onclick="prevStep(2)">‚Üê Previous</button>
                        <button class="btn-next" onclick="nextStep(4)">Next Step ‚Üí</button>
                    </div>
                </div>
                
                <div id="step4" class="step-panel">
                    <h3>Pricing & Review</h3>
                    
                    <div class="pricing-grid">
                        <div class="form-group">
                            <label>Price Per Night ($)</label>
                            <input type="number" id="pricePerNight" placeholder="e.g., 150">
                        </div>
                        <div class="form-group">
                            <label>Cleaning Fee ($)</label>
                            <input type="number" id="cleaningFee" placeholder="e.g., 50">
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Minimum Stay (nights)</label>
                                <select id="minStay">
                                    <option value="1">1 Night</option>
                                    <option value="2">2 Nights</option>
                                    <option value="3">3 Nights</option>
                                    <option value="7">1 Week</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Cancellation Policy</label>
                                <select id="cancellationPolicy">
                                    <option value="flexible">Flexible (Full refund 24h before)</option>
                                    <option value="moderate">Moderate (Full refund 5 days before)</option>
                                    <option value="strict">Strict (50% refund 7 days before)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="summary-section">
                        <h5>üìã Property Summary</h5>
                        <div class="summary-item">
                            <span>Title</span>
                            <span id="summaryTitle">-</span>
                        </div>
                        <div class="summary-item">
                            <span>Type</span>
                            <span id="summaryType">-</span>
                        </div>
                        <div class="summary-item">
                            <span>Location</span>
                            <span id="summaryLocation">-</span>
                        </div>
                        <div class="summary-item">
                            <span>Capacity</span>
                            <span id="summaryCapacity">-</span>
                        </div>
                        <div class="summary-item">
                            <span>Price</span>
                            <span id="summaryPrice">-</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="d-flex align-items-center gap-2">
                            <input type="checkbox" id="termsAgree">
                            I agree to the <a href="#">Terms of Service</a> and <a href="#">Host Guidelines</a>
                        </label>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-prev" onclick="prevStep(3)">‚Üê Previous</button>
                        <button class="btn-submit" onclick="submitProperty()">üöÄ Submit Property</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentStep = 1;
        let selectedType = '';
        let selectedAmenities = [];
        let uploadedImages = [];
        
        function nextStep(step) {
            if (!validateStep(currentStep)) return;
            
            document.getElementById('step' + currentStep).classList.remove('active');
            document.getElementById('step' + step).classList.add('active');
            
            document.getElementById('step' + currentStep + 'Circle').classList.remove('active');
            document.getElementById('step' + currentStep + 'Circle').classList.add('completed');
            document.getElementById('step' + step + 'Circle').classList.add('active');
            
            if (currentStep < step) {
                document.getElementById('line' + currentStep).classList.add('active');
            }
            
            currentStep = step;
            
            if (step === 4) {
                updateSummary();
            }
        }
        
        function prevStep(step) {
            document.getElementById('step' + currentStep).classList.remove('active');
            document.getElementById('step' + step).classList.add('active');
            
            document.getElementById('step' + currentStep + 'Circle').classList.remove('active');
            document.getElementById('step' + step + 'Circle').classList.remove('completed');
            document.getElementById('step' + step + 'Circle').classList.add('active');
            
            if (currentStep > step) {
                document.getElementById('line' + step).classList.remove('active');
            }
            
            currentStep = step;
        }
        
        function validateStep(step) {
            if (step === 1) {
                const title = document.getElementById('propertyTitle').value;
                const description = document.getElementById('propertyDescription').value;
                
                if (!title) {
                    alert('Please enter a property title');
                    return false;
                }
                if (!selectedType) {
                    alert('Please select a property type');
                    return false;
                }
                if (!description) {
                    alert('Please enter a description');
                    return false;
                }
            }
            
            if (step === 2) {
                const country = document.getElementById('country').value;
                const city = document.getElementById('city').value;
                const address = document.getElementById('address').value;
                
                if (!country) {
                    alert('Please select a country');
                    return false;
                }
                if (!city) {
                    alert('Please enter a city');
                    return false;
                }
                if (!address) {
                    alert('Please enter an address');
                    return false;
                }
            }
            
            return true;
        }
        
        function selectType(element, type) {
            document.querySelectorAll('.property-type-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedType = type;
        }
        
        function toggleAmenity(element) {
            element.classList.toggle('selected');
            const checkbox = element.querySelector('input');
            checkbox.checked = !checkbox.checked;
            
            if (checkbox.checked) {
                selectedAmenities.push(checkbox.value);
            } else {
                selectedAmenities = selectedAmenities.filter(a => a !== checkbox.value);
            }
        }
        
        function handleImageUpload(input) {
            const files = Array.from(input.files);
            const previewGrid = document.getElementById('imagePreviewGrid');
            
            files.forEach((file, index) => {
                if (uploadedImages.length >= 10) {
                    alert('Maximum 10 images allowed');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    uploadedImages.push(e.target.result);
                    
                    const preview = document.createElement('div');
                    preview.className = 'image-preview';
                    preview.innerHTML = `
                        <img src="${e.target.result}" alt="Preview">
                        <button class="remove-btn" onclick="removeImage(${uploadedImages.length - 1}, this)">√ó</button>
                    `;
                    previewGrid.appendChild(preview);
                };
                reader.readAsDataURL(file);
            });
        }
        
        function removeImage(index, btn) {
            uploadedImages.splice(index, 1);
            btn.parentElement.remove();
        }
        
        function updateSummary() {
            document.getElementById('summaryTitle').textContent = document.getElementById('propertyTitle').value;
            document.getElementById('summaryType').textContent = selectedType.charAt(0).toUpperCase() + selectedType.slice(1);
            document.getElementById('summaryLocation').textContent = 
                document.getElementById('city').value + ', ' + 
                document.getElementById('country').options[document.getElementById('country').selectedIndex].text;
            document.getElementById('summaryCapacity').textContent = 
                document.getElementById('bedrooms').value + ' BR, ' +
                document.getElementById('bathrooms').value + ' BA, ' +
                document.getElementById('maxGuests').value + ' Guests';
            document.getElementById('summaryPrice').textContent = '$' + (document.getElementById('pricePerNight').value || '0') + '/night';
        }
        
        function submitProperty() {
            const termsAgree = document.getElementById('termsAgree').checked;
            const pricePerNight = document.getElementById('pricePerNight').value;
            
            if (!pricePerNight) {
                alert('Please enter a price per night');
                return;
            }
            
            if (!termsAgree) {
                alert('Please agree to the Terms of Service');
                return;
            }
            
            const property = {
                id: Date.now(),
                title: document.getElementById('propertyTitle').value,
                type: selectedType,
                description: document.getElementById('propertyDescription').value,
                bedrooms: document.getElementById('bedrooms').value,
                bathrooms: document.getElementById('bathrooms').value,
                maxGuests: document.getElementById('maxGuests').value,
                country: document.getElementById('country').value,
                city: document.getElementById('city').value,
                address: document.getElementById('address').value,
                zipCode: document.getElementById('zipCode').value,
                neighborhood: document.getElementById('neighborhood').value,
                landmarks: document.getElementById('landmarks').value,
                amenities: selectedAmenities,
                images: uploadedImages,
                pricePerNight: pricePerNight,
                cleaningFee: document.getElementById('cleaningFee').value || 0,
                minStay: document.getElementById('minStay').value,
                cancellationPolicy: document.getElementById('cancellationPolicy').value,
                status: 'pending',
                createdAt: new Date().toISOString(),
                hostId: localStorage.getItem('userId')
            };
            
            const properties = JSON.parse(localStorage.getItem('hostProperties') || '[]');
            properties.push(property);
            localStorage.setItem('hostProperties', JSON.stringify(properties));
            
            alert('Property submitted successfully!\n\nYour property is pending approval and will be listed once reviewed by our team.');
            
            window.location.href = 'profile.html';
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            const userRole = localStorage.getItem('userRole');
            
            if (!isLoggedIn) {
                alert('Please login to add a property');
                window.location.href = 'loginup.html';
                return;
            }
            
            if (userRole !== 'host') {
                alert('Only hosts can add properties. Please register as a host.');
                window.location.href = 'profile.html';
                return;
            }
        });
    </script>
</body>
</html>
