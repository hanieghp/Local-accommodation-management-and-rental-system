<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern 1BR Apartment | StayLocal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../assets/css/style.css" />
    <style>
        .detail-container {
            background: #f8f9fa;
            min-height: 100vh;
            padding-top: 100px;
        }
        
        .property-gallery {
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .main-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            cursor: pointer;
        }
        
        .thumbnail-gallery {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            overflow-x: auto;
            padding: 5px 0;
        }
        
        .thumbnail {
            width: 100px;
            height: 80px;
            object-fit: cover;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
        }
        
        .thumbnail:hover, .thumbnail.active {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .property-header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .property-title {
            font-size: 2rem;
            font-weight: 800;
            color: #1f2937;
            margin-bottom: 15px;
        }
        
        .property-location {
            color: #6b7280;
            font-size: 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .property-stats {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #4b5563;
            font-weight: 600;
        }
        
        .property-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .rating-stars {
            color: #fbbf24;
            font-size: 18px;
        }
        
        .rating-text {
            color: #6b7280;
        }
        
        .property-price {
            background: linear-gradient(135deg, var(--brand), var(--brand2));
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .price-amount {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 5px;
        }
        
        .price-unit {
            opacity: 0.9;
        }
        
        .info-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .info-card h4 {
            color: #1f2937;
            margin-bottom: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .amenity-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f9fafb;
            border-radius: 10px;
        }
        
        .booking-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: sticky;
            top: 120px;
        }
        
        .date-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .date-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 14px;
        }
        
        .date-input:focus {
            outline: none;
            border-color: var(--brand);
        }
        
        .guest-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .booking-summary {
            border-top: 2px solid #f3f4f6;
            padding-top: 20px;
            margin-top: 20px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .summary-total {
            font-weight: 700;
            font-size: 18px;
            color: var(--brand);
            border-top: 1px solid #e5e7eb;
            padding-top: 15px;
            margin-top: 15px;
        }
        
        .btn-book {
            width: 100%;
            background: linear-gradient(135deg, var(--brand), var(--brand2));
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .btn-book:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(24,169,153,0.3);
        }
        
        .review-card {
            border: 1px solid #e5e7eb;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .review-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .review-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .review-info h6 {
            margin-bottom: 5px;
            color: #1f2937;
        }
        
        .review-date {
            color: #6b7280;
            font-size: 14px;
        }
        
        .review-rating {
            color: #fbbf24;
            margin-bottom: 10px;
        }
        
        .host-card {
            display: flex;
            align-items: center;
            gap: 20px;
            background: #f9fafb;
            padding: 20px;
            border-radius: 15px;
        }
        
        .host-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .host-info h5 {
            color: #1f2937;
            margin-bottom: 5px;
        }
        
        .host-stats {
            color: #6b7280;
            font-size: 14px;
        }
        
        .map-container {
            height: 300px;
            background: #e5e7eb;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            font-size: 18px;
        }
        
        @media (max-width: 992px) {
            .booking-card {
                position: static;
                margin-top: 30px;
            }
        }
    </style>
</head>
<body>
    <header class="bg-white border-bottom fixed-top">
        <nav class="navbar navbar-expand-lg container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <img src="../assets/images/img.png" height="50" width="50">
                <span class="fw-bold">StayLocal</span>
            </a>
            <div class="d-flex gap-2">
                <a class="btn btn-outline-secondary" href="properties.html">Back</a>
                <a class="btn btn-outline-secondary" href="profile.html">Profile</a>
            </div>
        </nav>
    </header>

    <div class="detail-container">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="property-gallery">
                        <img src="../assets/images/img_7.png" alt="Modern Apartment" class="main-image" id="mainImage">
                        <div class="thumbnail-gallery">
                            <img src="../assets/images/img_7.png" alt="Image 1" class="thumbnail active" onclick="changeImage(this)">
                            <img src="../assets/images/img_8.png" alt="Image 2" class="thumbnail" onclick="changeImage(this)">
                            <img src="../assets/images/img_9.png" alt="Image 3" class="thumbnail" onclick="changeImage(this)">
                            <img src="../assets/images/img_10.png" alt="Image 4" class="thumbnail" onclick="changeImage(this)">
                            <img src="../assets/images/img_11.png" alt="Image 5" class="thumbnail" onclick="changeImage(this)">
                        </div>
                    </div>
                    
                    <div class="property-header">
                        <h1 class="property-title">Modern 1BR Apartment</h1>
                        <div class="property-location">
                            New York, Manhattan, 5th Avenue
                        </div>
                        <div class="property-stats">
                            <div class="stat-item">2+1 Guests</div>
                            <div class="stat-item">1 Bedroom</div>
                            <div class="stat-item">1 Bathroom</div>
                            <div class="stat-item">850 sq ft</div>
                        </div>
                        <div class="property-rating">
                            <div class="rating-stars">5.0</div>
                            <strong>4.8</strong>
                            <span class="rating-text">(24 reviews)</span>
                        </div>
                        <div class="property-price">
                            <div class="price-amount">$150</div>
                            <div class="price-unit">per night</div>
                        </div>
                    </div>
                    
                    <div class="info-card">
                        <h4>Description</h4>
                        <p class="text-muted lh-lg">
                            This modern and clean apartment is located in the heart of Manhattan. With easy access to shopping centers, restaurants, and public transportation, 
                            this is the ideal choice for business and leisure trips. The apartment has all the amenities you need including high-speed WiFi, 
                            a full kitchen, smart TV, and private parking. It's just a short walk from the subway station and major city attractions.
                        </p>
                    </div>
                    
                    <div class="info-card">
                        <h4>Amenities</h4>
                        <div class="amenities-grid">
                            <div class="amenity-item">
                                High-Speed WiFi
                            </div>
                            <div class="amenity-item">
                                Private Parking
                            </div>
                            <div class="amenity-item">
                                AC & Heating
                            </div>
                            <div class="amenity-item">
                                Smart TV
                            </div>
                            <div class="amenity-item">
                                Full Kitchen
                            </div>
                            <div class="amenity-item">
                                Washer/Dryer
                            </div>
                            <div class="amenity-item">
                                Stove & Oven
                            </div>
                            <div class="amenity-item">
                                Modern Bathroom
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-card">
                        <h4>Host</h4>
                        <div class="host-card">
                            <img src="https://randomuser.me/api/portraits/men/42.jpg" alt="Host" class="host-avatar">
                            <div class="host-info">
                                <h5>Michael Johnson</h5>
                                <div class="host-stats">
                                    4.9 Rating - 57 Properties - Host since 2020
                                </div>
                                <p class="mt-2 mb-0 text-muted">
                                    Experienced host with quick response time. Always here to help my guests.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-card">
                        <h4>Location</h4>
                        <div class="map-container">Interactive Map (Loading...)</div>
                        <div class="mt-3">
                            <p class="text-muted">
                                Address: 123 5th Avenue, Manhattan, New York, NY 10001
                            </p>
                            <div class="row mt-3">
                                <div class="col-md-6">
                                    <strong>Nearby Places:</strong>
                                    <ul class="mt-2">
                                        <li>Subway Station - 5 min walk</li>
                                        <li>Central Park - 10 min walk</li>
                                        <li>Times Square - 15 min walk</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <strong>Transportation:</strong>
                                    <ul class="mt-2">
                                        <li>JFK Airport - 45 min</li>
                                        <li>LaGuardia Airport - 30 min</li>
                                        <li>Penn Station - 15 min</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-card">
                        <h4>Guest Reviews (24 reviews)</h4>
                        
                        <div class="review-card">
                            <div class="review-header">
                                <img src="https://randomuser.me/api/portraits/women/32.jpg" alt="User" class="review-avatar">
                                <div class="review-info">
                                    <h6>Sarah Williams</h6>
                                    <div class="review-date">December 15, 2024</div>
                                </div>
                                <div class="ms-auto review-rating">5/5</div>
                            </div>
                            <p class="text-muted">
                                The apartment was extremely clean and well-organized. The host was very kind and responsive. Great location and easy access to everywhere. 
                                Will definitely book again.
                            </p>
                        </div>
                        
                        <div class="review-card">
                            <div class="review-header">
                                <img src="https://randomuser.me/api/portraits/men/28.jpg" alt="User" class="review-avatar">
                                <div class="review-info">
                                    <h6>David Brown</h6>
                                    <div class="review-date">December 8, 2024</div>
                                </div>
                                <div class="ms-auto review-rating">5/5</div>
                            </div>
                            <p class="text-muted">
                                Everything was as expected. Full kitchen and great amenities. Parking was included which was very important. 
                                Highly recommend to everyone.
                            </p>
                        </div>
                        
                        <button class="btn btn-outline-secondary">View All Reviews</button>
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <div class="booking-card">
                        <h5 class="mb-4">Book This Property</h5>
                        
                        <div class="date-input-group">
                            <input type="date" class="date-input" id="checkinDate" placeholder="Check-in">
                            <input type="date" class="date-input" id="checkoutDate" placeholder="Check-out">
                        </div>
                        
                        <select class="guest-select" id="guestCount">
                            <option value="">Number of Guests</option>
                            <option value="1">1 Guest</option>
                            <option value="2">2 Guests</option>
                            <option value="3">3 Guests</option>
                        </select>
                        
                        <div class="booking-summary">
                            <div class="summary-row">
                                <span>$150 × 3 nights</span>
                                <span>$450</span>
                            </div>
                            <div class="summary-row">
                                <span>Service Fee</span>
                                <span>$22.50</span>
                            </div>
                            <div class="summary-row">
                                <span>Tax</span>
                                <span>$4.50</span>
                            </div>
                            <div class="summary-row summary-total">
                                <span>Total</span>
                                <span>$477</span>
                            </div>
                        </div>
                        
                        <button class="btn-book" onclick="makeReservation()">Book Now</button>
                        
                        <div class="text-center mt-3">
                            <small class="text-muted">You won't be charged yet</small>
                        </div>
                        
                        <hr>
                        
                        <div class="text-center">
                            <small class="text-muted">Add to Favorites</small><br>
                            <small class="text-muted">Share</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function changeImage(thumbnail) {
            const mainImage = document.getElementById('mainImage');
            const allThumbnails = document.querySelectorAll('.thumbnail');
            
            allThumbnails.forEach(thumb => thumb.classList.remove('active'));
            thumbnail.classList.add('active');
            mainImage.src = thumbnail.src;
        }
        
        function makeReservation() {
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                if (confirm('Please login to make a reservation. Would you like to login now?')) {
                    window.location.href = 'loginup.html';
                }
                return;
            }
            
            const checkinDate = document.getElementById('checkinDate').value;
            const checkoutDate = document.getElementById('checkoutDate').value;
            
            if (!checkinDate || !checkoutDate) {
                alert('Please select check-in and check-out dates');
                return;
            }
            
            if (new Date(checkinDate) >= new Date(checkoutDate)) {
                alert('Check-out date must be after check-in date');
                return;
            }
            
            const nights = Math.ceil((new Date(checkoutDate) - new Date(checkinDate)) / (1000 * 60 * 60 * 24));
            const pricePerNight = 150;
            const subtotal = nights * pricePerNight;
            const serviceFee = Math.round(subtotal * 0.05);
            const tax = Math.round(subtotal * 0.01);
            const total = subtotal + serviceFee + tax;
            
            const reservation = {
                id: Date.now(),
                propertyId: getPropertyIdFromURL(),
                propertyTitle: "Modern 1BR Apartment",
                checkin: checkinDate,
                checkout: checkoutDate,
                guests: document.getElementById('guestCount').value,
                nights: nights,
                total: total,
                status: 'pending',
                date: new Date().toISOString()
            };
            
            const reservations = JSON.parse(localStorage.getItem('userReservations') || '[]');
            reservations.push(reservation);
            localStorage.setItem('userReservations', JSON.stringify(reservations));
            
            alert('Your booking request has been submitted!\nBooking ID: ' + reservation.id + '\nYou will be notified once the host confirms.');
            
            window.location.href = 'profile.html';
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const checkinInput = document.getElementById('checkinDate');
            const checkoutInput = document.getElementById('checkoutDate');
            
            const today = new Date().toISOString().split('T')[0];
            checkinInput.setAttribute('min', today);
            checkoutInput.setAttribute('min', today);
            
            checkinInput.addEventListener('change', function() {
                const checkinDate = new Date(this.value);
                checkinDate.setDate(checkinDate.getDate() + 1);
                const minCheckout = checkinDate.toISOString().split('T')[0];
                checkoutInput.setAttribute('min', minCheckout);
                updateBookingSummary();
            });
            
            checkoutInput.addEventListener('change', updateBookingSummary);
            
            updateNavigation();
        });
        
        function updateBookingSummary() {
            const checkinDate = document.getElementById('checkinDate').value;
            const checkoutDate = document.getElementById('checkoutDate').value;
            
            if (checkinDate && checkoutDate) {
                const nights = Math.ceil((new Date(checkoutDate) - new Date(checkinDate)) / (1000 * 60 * 60 * 24));
                
                if (nights > 0) {
                    const pricePerNight = 150;
                    const subtotal = nights * pricePerNight;
                    const serviceFee = Math.round(subtotal * 0.05);
                    const tax = Math.round(subtotal * 0.01);
                    const total = subtotal + serviceFee + tax;
                    
                    document.querySelector('.summary-row:first-child span:first-child').textContent = 
                        `$${pricePerNight} × ${nights} night${nights > 1 ? 's' : ''}`;
                    document.querySelector('.summary-row:first-child span:last-child').textContent = 
                        `$${subtotal}`;
                    document.querySelector('.summary-row:nth-child(2) span:last-child').textContent = 
                        `$${serviceFee}`;
                    document.querySelector('.summary-row:nth-child(3) span:last-child').textContent = 
                        `$${tax}`;
                    document.querySelector('.summary-total span:last-child').textContent = 
                        `$${total}`;
                }
            }
        }
        
        function getPropertyIdFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id') || '1';
        }
        
        function updateNavigation() {
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            const userName = localStorage.getItem('userName');
            const profileLink = document.querySelector('a[href="profile.html"]');
            
            if (isLoggedIn && userName && profileLink) {
                profileLink.innerHTML = userName;
            }
        }
    </script>
</body>
</html>
